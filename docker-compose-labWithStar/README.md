# это лаба 2 со звездой
## Что надо:
* Написать “плохой” Docker compose файл, в котором есть не менее трех “bad practices” по их написанию
* Написать “хороший” Docker compose файл, в котором эти плохие практики исправлены
* В Readme описать каждую из плохих практик в плохом файле, почему она плохая и как в хорошем она была исправлена, как исправление повлияло на результат
* После предыдущих пунктов в хорошем файле настроить сервисы так, чтобы контейнеры в рамках этого compose-проекта так же поднимались вместе, но не "видели" друг друга по сети. В отчете описать, как этого добились и кратко объяснить принцип такой изоляции
# Подготовка
### установка docker-compose.
![image](install.png)
docker-compose уже установлен
# Делаем докерфайлы
## в команды добавил чисто bash скрипт, чтобы он писал, что контейнеры работают
### плохой
![image](bad.png)
### хороший
![image](https://github.com/user-attachments/assets/4f627e27-93f9-4eca-841a-8babfd7f89cd)
![image](https://github.com/user-attachments/assets/f0413e3b-ee9f-489c-9500-29b3ff958549)
## Что не так:
* Привилегированный режим у контейнера — это небезопасно(помните мем с оксимироном), т.к это даёт контейнеру доступ к ресурсам хоста. А зачем его давать, если можно не давать, вдруг еще хакнут. Поэтому выключили его - сильно безопаснее
* Добавление ненужной зависимости - убираем depends_on - все работает ожидаемо
* Использование latest вместо указания версии, так как все может поменяться в новой версии - было уже во второй лабе - не боимся обновлений
* Секреты не должны храниться в коде, ссылаемся на secrets - сильно безопаснее
# Сеть
## По дефолту контейнеры находятся в одной сети, поэтому видят друг друга. Нам надо, чтобы не видели -> делаем разные сети -> PROFIT
### Я поправил хороший файл и заменил в app1 команду на ping, чтобы проверить, видят они друг друга или нет
![image](https://github.com/user-attachments/assets/e54f85ff-863b-4a38-8c10-516e26d4d9c4)
# Готово, вывод:
### Ooh, I had nine lives, but lost all of them. And i been searching ин дэ найт энд ай би серчинг бат зэй дизапир
### Вот как-то так. У каждой медали есть две стороны, и однажды все может перевернуться. Тот, кому ты нравился — начинает тебя ненавидеть. Тот, кому ты бил морду — становится твоим другом. Ну а тот, кто казался злобным тираном — становится им чуть меньше.
### бат ай лост ол оф зэм. туруруру ду ду ду
